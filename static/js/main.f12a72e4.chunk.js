(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{12:function(e,t,n){"use strict";var s=n(25);n.d(t,"DEFAULT_MODE",(function(){return s.a})),n.d(t,"DEFAULT_MUSIC",(function(){return s.b})),n.d(t,"DEFAULT_SIDE",(function(){return s.c})),n.d(t,"DEFAULT_SOUND",(function(){return s.d})),n.d(t,"DEFAULT_VIEW",(function(){return s.e}));n(26)},25:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i}));var s="fixed",a="random",c="with-AI",r=.5,i=0},26:function(e,t){},40:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(16),r=n.n(c),i=n(6),o=n(5),u=(n(40),n(4)),l=n(0),d=function(){return Object(l.jsx)("footer",{className:"footer",children:"Footer"})},m="SELECT_SQUARE",b="MOVE_PIECE",j="MAKE_AI_MOVE",v="PROMOTE_PAWN",h="START_GAME",f="SURRENDER",O="UNDO",p="SET_VIEW",x="SET_SIDE",S="SET_MODE",w="SET_MUSIC",g="SET_SOUND",_=function(e){return{type:w,payload:e}},y=function(e){return{type:g,payload:e}},M=Object(o.b)(null,(function(e){return{startNewGame:function(){return e({type:h})}}}))((function(e){var t=e.startNewGame;return Object(l.jsxs)("div",{className:"main",children:[Object(l.jsx)(i.b,{className:"btn",onClick:t,to:"/game",children:"New Game"}),Object(l.jsx)(i.b,{className:"btn",to:"/settings",children:"Settings"}),Object(l.jsx)(i.b,{className:"btn",to:"/statistics",children:"Statistics"}),Object(l.jsx)(i.b,{className:"btn",to:"/hotkeys",children:"Hot keys"})]})})),N=n(11),E=function(e){var t=e.children,n=e.isDark,s=e.handleClick,a=e.isLastMove,c=e.isPossibleSquare,r=e.isCapturedSquare,i=e.possibleMovesShown,o=e.lastMoveShown,u="square";return n&&(u+=" square--dark"),a&&(u+=o?" square--last-move":""),c&&(u+=" interactive",u+=i?" square--possible":""),r&&(u+=" interactive",u+=i?" square--captured":""),Object(l.jsx)("div",{className:u,onClick:s,children:t})},A=function(e){var t=e.piece,n=e.isSelected,s=e.turn,a=e.mode,c=e.side,r=t.type,i=t.color,o="".concat(i).concat(r.toUpperCase()),u="./assets/".concat(o,".png"),d="";s===i&&("with-AI"===a?c===i&&(d="interactive"):d="interactive");var m="piece ".concat(n?"selected":""," ").concat(d);return Object(l.jsx)("div",{className:m,children:Object(l.jsx)("img",{src:u,alt:o})})},k=function(e,t){return{x:t?Math.abs(e%8-7):e%8,y:t?Math.floor(e/8):Math.abs(Math.floor(e/8)-7)}},I=function(e){var t=k(e);return(t.x+t.y)%2===1},C=function(e,t){var n=k(e,t),s=n.x,a=n.y;return"".concat("abcdefgh"[s]).concat(a+1)},T=function(e,t){var n=e[0],s=+e[1]-1,a="abcdefgh".indexOf(n);return t?8*s+7-a:8*(7-s)+a},D=function(){return"wb"[Math.round(Math.random())]},U=Object(o.b)(null,(function(e){return{promote:function(t){return e(function(e){return{type:v,payload:e}}(t))}}}))((function(e){var t=e.data,n=e.promote,s=null===t||void 0===t?void 0:t.color;return Object(l.jsx)("div",{className:"promotion",children:Object(l.jsxs)("div",{className:"promotion__body",children:[Object(l.jsx)("h2",{className:"promotion__title",children:"Pawn promotion"}),Object(l.jsx)("div",{className:"promotion__box",children:["q","n","r","b"].map((function(e,a){var c="".concat(s).concat(e.toUpperCase());return Object(l.jsx)("div",{className:"promotion__item interactive",onClick:function(){return function(e){if(t){var s=t.from,a=t.to;n({from:s,to:a,promotion:e})}}(e)},children:Object(l.jsx)("img",{src:"./assets/".concat(c,".png"),alt:c})},a)}))})]})})})),L=Object(o.b)((function(e){return{result:e.result}}))((function(e){var t=e.result;return Object(l.jsx)("div",{className:"game-over",children:Object(l.jsxs)("div",{className:"game-over__body",children:[Object(l.jsx)("h2",{className:"game-over__title",children:"Game Over"}),Object(l.jsx)("span",{className:"game-over__result",children:t}),Object(l.jsx)(i.b,{to:"/",className:"btn game-over__btn",children:"Menu"})]})})})),F=Object(o.b)((function(e){return{board:e.board,selectedSquare:e.selectedSquare,promotion:e.promotion,turn:e.turn,isGameOver:e.isGameOver,mode:e.mode,side:e.actualSide,isSurrender:e.isSurrender,lastMove:e.lastMove,possibleMoves:e.posibleMoves,capturedMoves:e.capturedMoves}}),(function(e){return{selectSquare:function(t){return e(function(e){return{type:m,payload:e}}(t))},movePiece:function(t){return e(function(e){return{type:b,payload:e}}(t))}}}))((function(e){var t=e.board,n=e.selectedSquare,a=e.promotion,c=e.turn,r=e.isGameOver,i=e.mode,o=e.side,u=e.isSurrender,d=e.lastMove,m=e.possibleMoves,b=e.capturedMoves,j=e.lastMoveShown,v=e.possibleMovesShown,h=Object(s.useState)(r),f=Object(N.a)(h,2),O=f[0],p=f[1];Object(s.useEffect)((function(){var e=setTimeout((function(){p(r)}),u?0:1e3);return function(){return clearTimeout(e)}}),[r,u]);return Object(l.jsxs)("div",{className:"board",children:[t.map((function(s,a){return Object(l.jsx)(E,{isDark:I(a),handleClick:function(){return function(s,a){if(n!==a&&("with-AI"!==i||c===o))if(s)if(s.color===c){var r=t[a];r&&r.color===s.color?e.selectSquare(a):n&&e.movePiece(a)}else n&&e.movePiece(a);else e.movePiece(a)}(s,a)},isLastMove:d&&d.includes(a),isPossibleSquare:m&&m.includes(a),isCapturedSquare:b&&b.includes(a),lastMoveShown:j,possibleMovesShown:v,children:s&&Object(l.jsx)(A,{piece:s,turn:c,isSelected:n===a,mode:i,side:o})},a)})),a&&Object(l.jsx)(U,{data:a}),O&&Object(l.jsx)(L,{})]})})),q=new Worker("./stockfish.js");q.postMessage("uci"),q.postMessage("ucinewgame"),q.postMessage("setoption name MultiPV value 3"),q.postMessage("setoption name Minimum Thinking Time 500");var G=q,R=function(e){G.postMessage("position fen ".concat(e)),G.postMessage("go wtime 10000 btime 10000 winc 1000 binc 1000")},P=function(e,t){var n=Object(s.useCallback)((function(n){n.code===e&&t()}),[e,t]);Object(s.useEffect)((function(){return document.addEventListener("keydown",n,!0),function(){return document.removeEventListener("keydown",n,!0)}}),[n])},W=Object(o.b)((function(e){return{isGameOver:e.isGameOver,mode:e.mode}}),(function(e){return{surrender:function(){return e({type:f})},undo:function(){return e({type:O})}}}))((function(e){var t=e.isGameOver,n=e.mode,a=e.undo,c=e.surrender,r=Object(s.useState)(!0),i=Object(N.a)(r,2),o=i[0],u=i[1],d=Object(s.useState)(!0),m=Object(N.a)(d,2),b=m[0],j=m[1];P("KeyH",(function(){return u(!o)})),P("KeyM",(function(){return j(!b)}));var v=Object(s.useState)(),h=Object(N.a)(v,2),f=h[0],O=h[1],p=Object(s.useCallback)((function(){if(!f&&(a(),"with-AI"===n)){var e=setTimeout((function(){a(),O(null)}),800);O(e)}}),[n,a,f]);P("KeyS",c),P("KeyU",p);return Object(l.jsxs)("div",{className:"game",children:[Object(l.jsx)(F,{lastMoveShown:o,possibleMovesShown:b}),!t&&Object(l.jsx)("button",{className:"btn game__btn",onClick:function(){c(),G.postMessage("quit")},type:"button",children:"Surrender"})]})})),V=function(e){var t=e.name,n=e.value,s=e.checked,a=e.label;return Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{type:"radio",name:t,value:n,defaultChecked:s}),a]})},H=function(e){var t=e.handleChange,n=e.side;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"settings__item",children:[Object(l.jsx)("h3",{className:"settings__title",children:"Side"}),Object(l.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(l.jsx)(V,{name:"side",value:"w",checked:"w"===n,label:"White"}),Object(l.jsx)(V,{name:"side",value:"b",checked:"b"===n,label:"Black"}),Object(l.jsx)(V,{name:"side",value:"random",checked:"random"===n,label:"Random"})]})]})})},K=function(e){var t=e.name,n=e.value,s=e.label;return Object(l.jsxs)("label",{children:[s,Object(l.jsx)("input",{type:"range",name:t,min:"0",max:"1",step:"0.1",defaultValue:n})]})},B=function(e){var t=e.handleChange,n=e.music,s=e.sound;return Object(l.jsxs)("div",{className:"settings__item audio",children:[Object(l.jsx)("h3",{className:"settings__title",children:"Audio"}),Object(l.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(l.jsx)(K,{name:"music",value:n,label:"Music:"}),Object(l.jsx)(K,{name:"sound",value:s,label:"Sound:"})]})]})},J=function(e){var t=e.fullscreen,n=Object(N.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(a),i=Object(N.a)(r,2),o=i[0],u=i[1];return Object(l.jsxs)("div",{className:"settings__item",children:[Object(l.jsx)("h3",{className:"settings__title",children:"Fullscreen"}),Object(l.jsx)("div",{className:"settings__box",children:Object(l.jsxs)("label",{htmlFor:"fullscreen",children:[Object(l.jsx)("input",{type:"radio",id:"fullscreen",onClick:function(){u(!o),a===o&&c()},defaultChecked:o}),"Enable"]})})]})},Q=function(e){var t=e.handleChange,n=e.mode;return Object(l.jsxs)("div",{className:"settings__item",children:[Object(l.jsx)("h3",{className:"settings__title",children:"Mode"}),Object(l.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(l.jsx)(V,{name:"mode",value:"with-AI",checked:"with-AI"===n,label:"With AI"}),Object(l.jsx)(V,{name:"mode",value:"two-players",checked:"two-players"===n,label:"Two players"})]})]})},z=function(e){var t=e.handleChange,n=e.view;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"settings__item",children:[Object(l.jsx)("h3",{className:"settings__title",children:"View"}),Object(l.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(l.jsx)(V,{name:"view",value:"auto-rotate",checked:"auto-rotate"===n,label:"Auto rotate"}),Object(l.jsx)(V,{name:"view",value:"fixed",checked:"fixed"===n,label:"Fixed"})]})]})})},X=Object(o.b)((function(e){return{side:e.side,view:e.view,mode:e.mode,sound:e.sound,music:e.music}}),(function(e){return{setSide:function(t){return e(function(e){return{type:x,payload:e}}(t))},setView:function(t){return e(function(e){return{type:p,payload:e}}(t))},setMode:function(t){return e(function(e){return{type:S,payload:e}}(t))},setSound:function(t){return e(y(t))},setMusic:function(t){return e(_(t))}}}))((function(e){var t=e.side,n=e.view,s=e.mode,a=e.sound,c=e.music,r=e.fullscreen,o=function(t){switch(t.target.name){case"view":e.setView(t.target.value);break;case"side":e.setSide(t.target.value);break;case"mode":e.setMode(t.target.value);break;case"music":e.setMusic(+t.target.value);break;case"sound":e.setSound(+t.target.value)}};return Object(l.jsxs)("div",{className:"settings",children:[Object(l.jsx)(i.b,{className:"btn btn--back",to:"/",children:"Back"}),Object(l.jsx)(Q,{handleChange:o,mode:s}),"with-AI"===s&&Object(l.jsx)(H,{handleChange:o,side:t}),"two-players"===s&&Object(l.jsx)(z,{handleChange:o,view:n}),Object(l.jsx)(B,{handleChange:o,music:c,sound:a}),Object(l.jsx)(J,{fullscreen:r})]})})),Y=function(e){var t=Object(s.useState)(null!==document.fullscreenElement),n=Object(N.a)(t,2),a=n[0],c=n[1];return Object(s.useLayoutEffect)((function(){document.onfullscreenchange=function(){return c(null!==document.fullscreenElement),function(){document.onfullscreenchange=null}}})),[a,function(){null!==e.current&&(a?document.exitFullscreen().then((function(){return c(!1)})):e.current.requestFullscreen().then((function(){return c(null!==document.fullscreenElement)})))}]},Z=Object(o.b)((function(e){return{statistics:e.statistics}}))((function(e){var t=e.statistics,n=["date","mode","side","winner"];return Object(l.jsxs)("div",{className:"statistics",children:[Object(l.jsx)(i.b,{className:"btn btn--back",to:"/",children:"Back"}),Object(l.jsxs)("table",{className:"statistics__table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"statistics__header",children:"\u2116"}),n.map((function(e,t){return Object(l.jsx)("th",{className:"statistics__header",children:e},t)}))]})}),Object(l.jsx)("tbody",{children:t.map((function(e,t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"statistics__number",children:t+1}),n.map((function(t,n){return Object(l.jsx)("td",{className:"statistics__cell",children:e[t].toString()},n)}))]},t)}))})]})]})})),$=n(15),ee=function(){return Object(l.jsxs)("div",{className:"hot-keys",children:[Object(l.jsx)(i.b,{className:"btn btn--back",to:"/",children:"Back"}),Object(l.jsxs)("ul",{className:"hot-keys__list",children:[Object(l.jsxs)("li",{className:"hot-keys__item",children:[Object(l.jsx)("span",{children:"U"}),Object(l.jsx)("span",{children:"Undo move"})]}),Object(l.jsxs)("li",{className:"hot-keys__item",children:[Object(l.jsx)("span",{children:"S"}),Object(l.jsx)("span",{children:"Surrender"})]}),Object(l.jsxs)("li",{className:"hot-keys__item",children:[Object(l.jsx)("span",{children:"H"}),Object(l.jsx)("span",{children:"Hide last move"})]}),Object(l.jsxs)("li",{className:"hot-keys__item",children:[Object(l.jsx)("span",{children:"M"}),Object(l.jsx)("span",{children:"Hide possible moves"})]}),Object(l.jsxs)("li",{className:"hot-keys__item",children:[Object(l.jsxs)("span",{children:[Object(l.jsx)($.d,{}),Object(l.jsx)($.a,{})]}),Object(l.jsx)("span",{children:"Set music volume"})]}),Object(l.jsxs)("li",{className:"hot-keys__item",children:[Object(l.jsxs)("span",{children:[Object(l.jsx)($.b,{}),Object(l.jsx)($.c,{})]}),Object(l.jsx)("span",{children:"Set sound volume"})]})]})]})},te=Object(o.b)((function(e){return{music:e.music,sound:e.sound}}),(function(e){return{setMusic:function(t){return e(_(t))},setSound:function(t){return e(y(t))}}}))((function(e){var t=e.music,n=e.sound;P("ArrowUp",(function(){return e.setMusic(Math.min(t+.1,1))})),P("ArrowDown",(function(){return e.setMusic(Math.max(t-.1,0))})),P("ArrowRight",(function(){return e.setSound(Math.min(n+.1,1))})),P("ArrowLeft",(function(){return e.setSound(Math.max(n-.1,0))}));var a=Object(s.useRef)(null),c=Y(a);return Object(l.jsxs)("div",{className:"App",ref:a,children:[Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{exact:!0,path:"/",component:M}),Object(l.jsx)(u.a,{path:"/game",component:W}),Object(l.jsx)(u.a,{path:"/statistics",component:Z}),Object(l.jsx)(u.a,{path:"/settings",children:Object(l.jsx)(X,{fullscreen:c})}),Object(l.jsx)(u.a,{path:"/hotkeys",component:ee})]}),Object(l.jsx)(d,{})]})})),ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))},se=n(17),ae=n(2),ce=n(18),re=n(29),ie=n(12),oe=n.p+"static/media/move.a7304208.wav",ue=n.p+"static/media/music.69eab84e.mp3",le=function(e){if("fen"===e)return localStorage.getItem("react-chess-".concat(e));if("statistics"===e){var t=localStorage.getItem("react-chess-statistics");return JSON.parse(t||"[]")}var n=localStorage.getItem("react-chess-settings");return n&&JSON.parse(n)[e]||null},de=function(e,t){if("string"===typeof e)if("fen"!==e||"string"!==typeof t)if("statistics"!==e){var n=localStorage.getItem("react-chess-settings")||"{}",s=JSON.parse(n),a=Object(ae.a)(Object(ae.a)({},s),{},Object(ce.a)({},e,t));localStorage.setItem("react-chess-settings",JSON.stringify(a))}else localStorage.setItem("react-chess-statistics",JSON.stringify(t));else localStorage.setItem("react-chess-fen",t)},me={fen:le("fen")||void 0,view:le("view")||ie.DEFAULT_VIEW,mode:le("mode")||ie.DEFAULT_MODE,side:le("side")||ie.DEFAULT_SIDE,actualSide:le("actualSide"),statistics:le("statistics")||[]};if(!me.actualSide){var be=me.side;me.actualSide="random"===be?D():be}var je={move:new Audio(oe),music:new Audio(ue)};je.music.loop=!0;var ve=function(e){var t=e.mode,n=e.view,s=e.turn,a=e.actualSide;return"with-AI"!==t&&"auto-rotate"===n&&"w"!==s||"with-AI"===t&&"b"===a},he=new re(me.fen),fe=function(e){var t=Object(ae.a)(Object(ae.a)({},e),{},{date:(new Date).toLocaleString("ru-Ru",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})}),n=le("statistics");n.unshift(t),de("statistics",n.slice(0,10))},Oe=function(e){var t=he.board().flat();return ve(e)?t.reverse():t},pe=function(e){var t="with-AI"===e.mode?e.actualSide:"-";if(he.in_checkmate()){var n="w"===he.turn()?"b":"w";return fe({mode:e.mode,side:t,winner:n}),"CHECKMATE: WINNER - ".concat("b"===n?"BLACK":"WHITE")}if(he.in_draw()){var s="50 MOVES RULE";return he.in_stalemate()?s="STALEMATE":he.in_threefold_repetition()?s="THREEFOLD REPETITION":he.insufficient_material()&&(s="INSUFFICIENT MATERIAL"),fe({mode:e.mode,side:t,winner:"-"}),"DRAW - ".concat(s)}return fe({mode:e.mode,side:t,winner:"-"}),"UNKNOWN REASON"};"/game"===window.location.pathname&&"with-AI"===me.mode&&he.turn()!==me.actualSide&&R(he.fen());var xe={board:Oe({view:me.view,turn:he.turn(),mode:me.mode,actualSide:me.actualSide}),selectedSquare:null,promotion:null,turn:he.turn(),view:me.view,side:me.side,actualSide:me.actualSide,mode:me.mode,isGameOver:!1,result:null,isSurrender:!1,music:ie.DEFAULT_MUSIC,sound:ie.DEFAULT_SOUND,statistics:me.statistics,lastMove:null,posibleMoves:null,capturedMoves:null},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:he.reset(),de("fen","");var n=le("side")||ie.DEFAULT_SIDE,s=le("view")||ie.DEFAULT_VIEW,a=le("mode")||ie.DEFAULT_MODE,c="random"===n?D():n;de("actualSide",c),"with-AI"===a&&"b"===c&&R(he.fen());var r={view:e.view,turn:he.turn(),mode:a,actualSide:c};return Object(ae.a)(Object(ae.a)({},e),{},{selectedSquare:null,promotion:null,turn:he.turn(),view:s,side:n,actualSide:c,mode:a,board:Oe(r),isGameOver:!1,result:null,isSurrender:!1,lastMove:null,posibleMoves:null,capturedMoves:null});case m:var i=e.view,o=e.mode,u=e.actualSide,l=e.turn,d=ve({view:i,mode:o,actualSide:u,turn:l}),_=he.moves({square:C(t.payload,d),verbose:!0}),y=[],M=[];return _.forEach((function(e){e.captured?M.push(T(e.to,d)):y.push(T(e.to,d))})),Object(ae.a)(Object(ae.a)({},e),{},{selectedSquare:t.payload,posibleMoves:y,capturedMoves:M});case b:var N=e.selectedSquare,E=e.view,A=e.turn,k=e.mode,I=e.actualSide;if(!N||N===t.payload)return e;var U=ve({view:E,turn:A,mode:k,actualSide:I}),L=C(N,U),F=C(t.payload,U),q=he.moves({square:L,verbose:!0}).filter((function(e){return e.promotion}));if(q.length>0){je.move.play().catch();var G=q[0].color;return Object(ae.a)(Object(ae.a)({},e),{},{promotion:{from:L,to:F,color:G}})}var P=he.move({from:L,to:F});if(!P)return Object(ae.a)(Object(ae.a)({},e),{},{selectedSquare:null});de("fen",he.fen());var W=he.game_over();e.sound&&je.move.play().catch(),W||"with-AI"!==k||he.turn()===I||R(he.fen());var V={view:e.view,turn:he.turn(),mode:k,actualSide:I};return"auto-rotate"===E&&"two-players"===k&&(U=!U),Object(ae.a)(Object(ae.a)({},e),{},{selectedSquare:null,turn:he.turn(),board:Oe(V),isGameOver:W,statistics:W?le("statistics"):e.statistics,result:W?pe({mode:k,actualSide:I}):null,lastMove:[T(L,U),T(F,U)],posibleMoves:null,capturedMoves:null});case v:var H=t.payload,K=H.from,B=H.to,J=H.promotion;he.move({from:K,to:B,promotion:J}),localStorage.setItem("react-chess-fen",he.fen());var Q=he.game_over(),z=e.mode,X=e.actualSide;Q||"with-AI"!==z||he.turn()===X||R(he.fen());var Y={view:e.view,turn:he.turn(),mode:z,actualSide:X},Z=ve(Y);return Object(ae.a)(Object(ae.a)({},e),{},{selectedSquare:null,promotion:null,turn:he.turn(),board:Oe(Y),isGameOver:Q,statistics:Q?le("statistics"):e.statistics,result:Q?pe({mode:z,actualSide:X}):null,lastMove:[T(K,Z),T(B,Z)],posibleMoves:null,capturedMoves:null});case j:if(e.isSurrender)return Object(ae.a)({},e);he.move(t.payload),he.move(t.payload),de("fen",he.fen()),e.sound&&je.move.play().catch();var $=he.game_over(),ee=e.mode,te=e.actualSide,ne=e.view,se={view:ne,mode:ee,actualSide:te,turn:he.turn()},ce=t.payload,re=ce.from,oe=ce.to,ue=ve(se);return"auto-rotate"===ne&&"two-players"===ee&&(ue=!ue),Object(ae.a)(Object(ae.a)({},e),{},{promotion:null,turn:he.turn(),board:Oe(se),isGameOver:$,statistics:$?le("statistics"):e.statistics,result:$?pe({mode:ee,actualSide:te}):null,lastMove:[T(re,ue),T(oe,ue)]});case f:var me="WINNER - ",be="";me+="b"===(be="with-AI"===e.mode?"w"===e.actualSide?"b":"w":"w"===e.turn?"b":"w")?"BLACK":"WHITE";var Se="with-AI"===e.mode?e.actualSide:"-";return fe({mode:e.mode,side:Se,winner:be}),Object(ae.a)(Object(ae.a)({},e),{},{isSurrender:!0,isGameOver:!0,result:me,statistics:le("statistics")});case O:var we=e.mode,ge=e.isGameOver,_e=e.promotion,ye=e.turn,Me=e.actualSide,Ne=e.view;if(ge||_e)return e;if("with-AI"===we){if(1===he.history().length&&ye===Me)return e;if(2===he.history().length&&ye===Me)return e}var Ee=he.undo();Ee&&je.move.play().catch(),de("fen",he.fen());var Ae=he.history({verbose:!0}),ke=Ae[Ae.length-1],Ie=ke.from,Ce=ke.to,Te=ve({mode:we,view:Ne,turn:he.turn(),actualSide:Me});"auto-rotate"===Ne&&"two-players"===we&&(Te=!Te);var De={view:Ne,turn:he.turn(),mode:we,actualSide:Me,lastMove:[T(Ie,Te),T(Ce,Te)]};return Object(ae.a)(Object(ae.a)({},e),{},{board:Oe(De),turn:he.turn()});case p:return de("view",t.payload),Object(ae.a)(Object(ae.a)({},e),{},{view:t.payload});case x:return de("side",t.payload),Object(ae.a)(Object(ae.a)({},e),{},{side:t.payload});case S:return de("mode",t.payload),Object(ae.a)(Object(ae.a)({},e),{},{mode:t.payload});case g:return je.move.volume=t.payload,Object(ae.a)(Object(ae.a)({},e),{},{sound:t.payload});case w:var Ue=je.music;return Ue.paused&&t.payload?Ue.play().catch():t.payload||Ue.pause(),Ue.volume=t.payload,Object(ae.a)(Object(ae.a)({},e),{},{music:t.payload});default:return e}},we=Object(se.b)(Se),ge=function(e,t){if(e.data&&e.data.includes("bestmove")){var n=e.data.split(" ")[1],s=n.slice(0,2),a=n.slice(2,4);t((c={from:s,to:a,promotion:n[4]},{type:j,payload:c}))}var c};G.onmessage=function(e){return ge(e,we.dispatch)},r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(o.a,{store:we,children:Object(l.jsx)(te,{})})})}),document.getElementById("root")),ne()}},[[48,1,2]]]);
//# sourceMappingURL=main.f12a72e4.chunk.js.map