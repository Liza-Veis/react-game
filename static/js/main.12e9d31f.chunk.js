(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{12:function(e,t,n){"use strict";var s=n(25);n.d(t,"DEFAULT_MODE",(function(){return s.a})),n.d(t,"DEFAULT_MUSIC",(function(){return s.b})),n.d(t,"DEFAULT_SIDE",(function(){return s.c})),n.d(t,"DEFAULT_SOUND",(function(){return s.d})),n.d(t,"DEFAULT_VIEW",(function(){return s.e}));n(26)},25:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i}));var s="fixed",a="random",c="with-AI",r=.5,i=0},26:function(e,t){},40:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(16),r=n.n(c),i=n(6),o=n(5),u=(n(40),n(4)),l=n.p+"static/media/rs-logo.ad178c0d.svg",d=n(0),m=function(){return Object(d.jsxs)("footer",{className:"footer",children:[Object(d.jsx)("a",{className:"footer__logo",href:"https://rs.school/react/",children:Object(d.jsx)("img",{src:l,alt:"RS-School"})}),Object(d.jsxs)("span",{className:"footer__copy",children:["Made by ",Object(d.jsx)("a",{href:"https://github.com/Liza-Veis",children:"@Liza-Veis"})," in 2021"]})]})},b="SELECT_SQUARE",j="MOVE_PIECE",v="MAKE_AI_MOVE",h="PROMOTE_PAWN",O="START_GAME",f="SURRENDER",p="UNDO",x="SET_VIEW",S="SET_SIDE",g="SET_MODE",w="SET_MUSIC",_="SET_SOUND",y=function(e){return{type:w,payload:e}},M=function(e){return{type:_,payload:e}},N=Object(o.b)(null,(function(e){return{startNewGame:function(){return e({type:O})}}}))((function(e){var t=e.startNewGame;return Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)(i.b,{className:"btn",onClick:t,to:"/game",children:"New Game"}),Object(d.jsx)(i.b,{className:"btn",to:"/settings",children:"Settings"}),Object(d.jsx)(i.b,{className:"btn",to:"/statistics",children:"Statistics"}),Object(d.jsx)(i.b,{className:"btn",to:"/hotkeys",children:"Hot keys"})]})})),E=n(11),A=function(e){var t=e.children,n=e.isDark,s=e.handleClick,a=e.isLastMove,c=e.isPossibleSquare,r=e.isCapturedSquare,i=e.possibleMovesShown,o=e.lastMoveShown,u="square";return n&&(u+=" square--dark"),a&&(u+=o?" square--last-move":""),c&&(u+=" interactive",u+=i?" square--possible":""),r&&(u+=" interactive",u+=i?" square--captured":""),Object(d.jsx)("div",{className:u,onClick:s,children:t})},k=function(e){var t=e.piece,n=e.isSelected,s=e.turn,a=e.mode,c=e.side,r=t.type,i=t.color,o="".concat(i).concat(r.toUpperCase()),u="./assets/".concat(o,".png"),l="";s===i&&("with-AI"===a?c===i&&(l="interactive"):l="interactive");var m="piece ".concat(n?"selected":""," ").concat(l);return Object(d.jsx)("div",{className:m,children:Object(d.jsx)("img",{src:u,alt:o})})},I=function(e,t){return{x:t?Math.abs(e%8-7):e%8,y:t?Math.floor(e/8):Math.abs(Math.floor(e/8)-7)}},C=function(e){var t=I(e);return(t.x+t.y)%2===1},T=function(e,t){var n=I(e,t),s=n.x,a=n.y;return"".concat("abcdefgh"[s]).concat(a+1)},D=function(e,t){var n=e[0],s=+e[1]-1,a="abcdefgh".indexOf(n);return t?8*s+7-a:8*(7-s)+a},L=function(){return"wb"[Math.round(Math.random())]},U=Object(o.b)(null,(function(e){return{promote:function(t){return e(function(e){return{type:h,payload:e}}(t))}}}))((function(e){var t=e.data,n=e.promote,s=null===t||void 0===t?void 0:t.color;return Object(d.jsx)("div",{className:"promotion",children:Object(d.jsxs)("div",{className:"promotion__body",children:[Object(d.jsx)("h2",{className:"promotion__title",children:"Pawn promotion"}),Object(d.jsx)("div",{className:"promotion__box",children:["q","n","r","b"].map((function(e,a){var c="".concat(s).concat(e.toUpperCase());return Object(d.jsx)("div",{className:"promotion__item interactive",onClick:function(){return function(e){if(t){var s=t.from,a=t.to;n({from:s,to:a,promotion:e})}}(e)},children:Object(d.jsx)("img",{src:"./assets/".concat(c,".png"),alt:c})},a)}))})]})})})),F=Object(o.b)((function(e){return{result:e.result}}))((function(e){var t=e.result;return Object(d.jsx)("div",{className:"game-over",children:Object(d.jsxs)("div",{className:"game-over__body",children:[Object(d.jsx)("h2",{className:"game-over__title",children:"Game Over"}),Object(d.jsx)("span",{className:"game-over__result",children:t}),Object(d.jsx)(i.b,{to:"/",className:"btn game-over__btn",children:"Menu"})]})})})),q=Object(o.b)((function(e){return{board:e.board,selectedSquare:e.selectedSquare,promotion:e.promotion,turn:e.turn,isGameOver:e.isGameOver,mode:e.mode,side:e.actualSide,isSurrender:e.isSurrender,lastMove:e.lastMove,possibleMoves:e.posibleMoves,capturedMoves:e.capturedMoves}}),(function(e){return{selectSquare:function(t){return e(function(e){return{type:b,payload:e}}(t))},movePiece:function(t){return e(function(e){return{type:j,payload:e}}(t))}}}))((function(e){var t=e.board,n=e.selectedSquare,a=e.promotion,c=e.turn,r=e.isGameOver,i=e.mode,o=e.side,u=e.isSurrender,l=e.lastMove,m=e.possibleMoves,b=e.capturedMoves,j=e.lastMoveShown,v=e.possibleMovesShown,h=Object(s.useState)(r),O=Object(E.a)(h,2),f=O[0],p=O[1];Object(s.useEffect)((function(){var e=setTimeout((function(){p(r)}),u?0:1e3);return function(){return clearTimeout(e)}}),[r,u]);return Object(d.jsxs)("div",{className:"board",children:[t.map((function(s,a){return Object(d.jsx)(A,{isDark:C(a),handleClick:function(){return function(s,a){if(n!==a&&("with-AI"!==i||c===o))if(s)if(s.color===c){var r=t[a];r&&r.color===s.color?e.selectSquare(a):n&&e.movePiece(a)}else n&&e.movePiece(a);else e.movePiece(a)}(s,a)},isLastMove:l&&l.includes(a),isPossibleSquare:m&&m.includes(a),isCapturedSquare:b&&b.includes(a),lastMoveShown:j,possibleMovesShown:v,children:s&&Object(d.jsx)(k,{piece:s,turn:c,isSelected:n===a,mode:i,side:o})},a)})),a&&Object(d.jsx)(U,{data:a}),f&&Object(d.jsx)(F,{})]})})),R=new Worker("stockfish.js");R.postMessage("uci"),R.postMessage("ucinewgame"),R.postMessage("setoption name MultiPV value 3"),R.postMessage("setoption name Minimum Thinking Time 500");var G=R,P=function(e){G.postMessage("position fen ".concat(e)),G.postMessage("go wtime 10000 btime 10000 winc 1000 binc 1000")},V=function(e,t){var n=Object(s.useCallback)((function(n){n.code===e&&t()}),[e,t]);Object(s.useEffect)((function(){return document.addEventListener("keydown",n,!0),function(){return document.removeEventListener("keydown",n,!0)}}),[n])},W=Object(o.b)((function(e){return{isGameOver:e.isGameOver,mode:e.mode}}),(function(e){return{surrender:function(){return e({type:f})},undo:function(){return e({type:p})}}}))((function(e){var t=e.isGameOver,n=e.mode,a=e.undo,c=e.surrender,r=Object(s.useState)(!0),i=Object(E.a)(r,2),o=i[0],u=i[1],l=Object(s.useState)(!0),m=Object(E.a)(l,2),b=m[0],j=m[1];V("KeyH",(function(){return u(!o)})),V("KeyM",(function(){return j(!b)}));var v=Object(s.useState)(),h=Object(E.a)(v,2),O=h[0],f=h[1],p=Object(s.useCallback)((function(){if(!O&&(a(),"with-AI"===n)){var e=setTimeout((function(){a(),f(null)}),800);f(e)}}),[n,a,O]);V("KeyS",c),V("KeyU",p);return Object(d.jsxs)("div",{className:"game",children:[Object(d.jsx)(q,{lastMoveShown:o,possibleMovesShown:b}),!t&&Object(d.jsx)("button",{className:"btn game__btn",onClick:function(){c(),G.postMessage("quit")},type:"button",children:"Surrender"})]})})),H=function(e){var t=e.name,n=e.value,s=e.checked,a=e.label;return Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",name:t,value:n,defaultChecked:s}),a]})},K=function(e){var t=e.handleChange,n=e.side;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"settings__item",children:[Object(d.jsx)("h3",{className:"settings__title",children:"Side"}),Object(d.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(d.jsx)(H,{name:"side",value:"w",checked:"w"===n,label:"White"}),Object(d.jsx)(H,{name:"side",value:"b",checked:"b"===n,label:"Black"}),Object(d.jsx)(H,{name:"side",value:"random",checked:"random"===n,label:"Random"})]})]})})},B=function(e){var t=e.name,n=e.value,s=e.label;return Object(d.jsxs)("label",{children:[s,Object(d.jsx)("input",{type:"range",name:t,min:"0",max:"1",step:"0.1",defaultValue:n})]})},J=function(e){var t=e.handleChange,n=e.music,s=e.sound;return Object(d.jsxs)("div",{className:"settings__item audio",children:[Object(d.jsx)("h3",{className:"settings__title",children:"Audio"}),Object(d.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(d.jsx)(B,{name:"music",value:n,label:"Music:"}),Object(d.jsx)(B,{name:"sound",value:s,label:"Sound:"})]})]})},z=function(e){var t=e.fullscreen,n=Object(E.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(a),i=Object(E.a)(r,2),o=i[0],u=i[1];return Object(d.jsxs)("div",{className:"settings__item",children:[Object(d.jsx)("h3",{className:"settings__title",children:"Fullscreen"}),Object(d.jsx)("div",{className:"settings__box",children:Object(d.jsxs)("label",{htmlFor:"fullscreen",children:[Object(d.jsx)("input",{type:"radio",id:"fullscreen",onClick:function(){u(!o),a===o&&c()},defaultChecked:o}),"Enable"]})})]})},Q=function(e){var t=e.handleChange,n=e.mode;return Object(d.jsxs)("div",{className:"settings__item",children:[Object(d.jsx)("h3",{className:"settings__title",children:"Mode"}),Object(d.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(d.jsx)(H,{name:"mode",value:"with-AI",checked:"with-AI"===n,label:"With AI"}),Object(d.jsx)(H,{name:"mode",value:"two-players",checked:"two-players"===n,label:"Two players"})]})]})},X=function(e){var t=e.handleChange,n=e.view;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"settings__item",children:[Object(d.jsx)("h3",{className:"settings__title",children:"View"}),Object(d.jsxs)("div",{className:"settings__box",onChange:t,children:[Object(d.jsx)(H,{name:"view",value:"auto-rotate",checked:"auto-rotate"===n,label:"Auto rotate"}),Object(d.jsx)(H,{name:"view",value:"fixed",checked:"fixed"===n,label:"Fixed"})]})]})})},Y=Object(o.b)((function(e){return{side:e.side,view:e.view,mode:e.mode,sound:e.sound,music:e.music}}),(function(e){return{setSide:function(t){return e(function(e){return{type:S,payload:e}}(t))},setView:function(t){return e(function(e){return{type:x,payload:e}}(t))},setMode:function(t){return e(function(e){return{type:g,payload:e}}(t))},setSound:function(t){return e(M(t))},setMusic:function(t){return e(y(t))}}}))((function(e){var t=e.side,n=e.view,s=e.mode,a=e.sound,c=e.music,r=e.fullscreen,o=function(t){switch(t.target.name){case"view":e.setView(t.target.value);break;case"side":e.setSide(t.target.value);break;case"mode":e.setMode(t.target.value);break;case"music":e.setMusic(+t.target.value);break;case"sound":e.setSound(+t.target.value)}};return Object(d.jsxs)("div",{className:"settings",children:[Object(d.jsx)(i.b,{className:"btn btn--back",to:"/",children:"Back"}),Object(d.jsx)(Q,{handleChange:o,mode:s}),"with-AI"===s&&Object(d.jsx)(K,{handleChange:o,side:t}),"two-players"===s&&Object(d.jsx)(X,{handleChange:o,view:n}),Object(d.jsx)(J,{handleChange:o,music:c,sound:a}),Object(d.jsx)(z,{fullscreen:r})]})})),Z=function(e){var t=Object(s.useState)(null!==document.fullscreenElement),n=Object(E.a)(t,2),a=n[0],c=n[1];return Object(s.useLayoutEffect)((function(){document.onfullscreenchange=function(){return c(null!==document.fullscreenElement),function(){document.onfullscreenchange=null}}})),[a,function(){null!==e.current&&(a?document.exitFullscreen().then((function(){return c(!1)})):e.current.requestFullscreen().then((function(){return c(null!==document.fullscreenElement)})))}]},$=Object(o.b)((function(e){return{statistics:e.statistics}}))((function(e){var t=e.statistics,n=["date","mode","side","winner"];return Object(d.jsxs)("div",{className:"statistics",children:[Object(d.jsx)(i.b,{className:"btn btn--back",to:"/",children:"Back"}),Object(d.jsxs)("table",{className:"statistics__table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"statistics__header",children:"\u2116"}),n.map((function(e,t){return Object(d.jsx)("th",{className:"statistics__header",children:e},t)}))]})}),Object(d.jsx)("tbody",{children:t.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"statistics__number",children:t+1}),n.map((function(t,n){return Object(d.jsx)("td",{className:"statistics__cell",children:e[t].toString()},n)}))]},t)}))})]})]})})),ee=n(15),te=function(){return Object(d.jsxs)("div",{className:"hot-keys",children:[Object(d.jsx)(i.b,{className:"btn btn--back",to:"/",children:"Back"}),Object(d.jsxs)("ul",{className:"hot-keys__list",children:[Object(d.jsxs)("li",{className:"hot-keys__item",children:[Object(d.jsx)("span",{children:"U"}),Object(d.jsx)("span",{children:"Undo move"})]}),Object(d.jsxs)("li",{className:"hot-keys__item",children:[Object(d.jsx)("span",{children:"S"}),Object(d.jsx)("span",{children:"Surrender"})]}),Object(d.jsxs)("li",{className:"hot-keys__item",children:[Object(d.jsx)("span",{children:"H"}),Object(d.jsx)("span",{children:"Hide last move"})]}),Object(d.jsxs)("li",{className:"hot-keys__item",children:[Object(d.jsx)("span",{children:"M"}),Object(d.jsx)("span",{children:"Hide possible moves"})]}),Object(d.jsxs)("li",{className:"hot-keys__item",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)(ee.d,{}),Object(d.jsx)(ee.a,{})]}),Object(d.jsx)("span",{children:"Set music volume"})]}),Object(d.jsxs)("li",{className:"hot-keys__item",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)(ee.b,{}),Object(d.jsx)(ee.c,{})]}),Object(d.jsx)("span",{children:"Set sound volume"})]})]})]})},ne=Object(o.b)((function(e){return{music:e.music,sound:e.sound}}),(function(e){return{setMusic:function(t){return e(y(t))},setSound:function(t){return e(M(t))}}}))((function(e){var t=e.music,n=e.sound;V("ArrowUp",(function(){return e.setMusic(Math.min(t+.1,1))})),V("ArrowDown",(function(){return e.setMusic(Math.max(t-.1,0))})),V("ArrowRight",(function(){return e.setSound(Math.min(n+.1,1))})),V("ArrowLeft",(function(){return e.setSound(Math.max(n-.1,0))}));var a=Object(s.useRef)(null),c=Z(a);return Object(d.jsxs)("div",{className:"App",ref:a,children:[Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{exact:!0,path:"/",component:N}),Object(d.jsx)(u.a,{path:"/game",component:W}),Object(d.jsx)(u.a,{path:"/statistics",component:$}),Object(d.jsx)(u.a,{path:"/settings",children:Object(d.jsx)(Y,{fullscreen:c})}),Object(d.jsx)(u.a,{path:"/hotkeys",component:te})]}),Object(d.jsx)(m,{})]})})),se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))},ae=n(17),ce=n(2),re=n(18),ie=n(29),oe=n(12),ue=n.p+"static/media/move.a7304208.wav",le=n.p+"static/media/music.69eab84e.mp3",de=function(e){if("fen"===e)return localStorage.getItem("react-chess-".concat(e));if("statistics"===e){var t=localStorage.getItem("react-chess-statistics");return JSON.parse(t||"[]")}var n=localStorage.getItem("react-chess-settings");return n&&JSON.parse(n)[e]||null},me=function(e,t){if("string"===typeof e)if("fen"!==e||"string"!==typeof t)if("statistics"!==e){var n=localStorage.getItem("react-chess-settings")||"{}",s=JSON.parse(n),a=Object(ce.a)(Object(ce.a)({},s),{},Object(re.a)({},e,t));localStorage.setItem("react-chess-settings",JSON.stringify(a))}else localStorage.setItem("react-chess-statistics",JSON.stringify(t));else localStorage.setItem("react-chess-fen",t)},be={fen:de("fen")||void 0,view:de("view")||oe.DEFAULT_VIEW,mode:de("mode")||oe.DEFAULT_MODE,side:de("side")||oe.DEFAULT_SIDE,actualSide:de("actualSide"),statistics:de("statistics")||[]};if(!be.actualSide){var je=be.side;be.actualSide="random"===je?L():je}var ve={move:new Audio(ue),music:new Audio(le)};ve.music.loop=!0;var he=function(e){var t=e.mode,n=e.view,s=e.turn,a=e.actualSide;return"with-AI"!==t&&"auto-rotate"===n&&"w"!==s||"with-AI"===t&&"b"===a},Oe=new ie(be.fen),fe=function(e){var t=Object(ce.a)(Object(ce.a)({},e),{},{date:(new Date).toLocaleString("ru-Ru",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})}),n=de("statistics");n.unshift(t),me("statistics",n.slice(0,10))},pe=function(e){var t=Oe.board().flat();return he(e)?t.reverse():t},xe=function(e){var t="with-AI"===e.mode?e.actualSide:"-";if(Oe.in_checkmate()){var n="w"===Oe.turn()?"b":"w";return fe({mode:e.mode,side:t,winner:n}),"CHECKMATE: WINNER - ".concat("b"===n?"BLACK":"WHITE")}if(Oe.in_draw()){var s="50 MOVES RULE";return Oe.in_stalemate()?s="STALEMATE":Oe.in_threefold_repetition()?s="THREEFOLD REPETITION":Oe.insufficient_material()&&(s="INSUFFICIENT MATERIAL"),fe({mode:e.mode,side:t,winner:"-"}),"DRAW - ".concat(s)}return fe({mode:e.mode,side:t,winner:"-"}),"UNKNOWN REASON"};"/game"===window.location.pathname&&"with-AI"===be.mode&&Oe.turn()!==be.actualSide&&P(Oe.fen());var Se={board:pe({view:be.view,turn:Oe.turn(),mode:be.mode,actualSide:be.actualSide}),selectedSquare:null,promotion:null,turn:Oe.turn(),view:be.view,side:be.side,actualSide:be.actualSide,mode:be.mode,isGameOver:!1,result:null,isSurrender:!1,music:oe.DEFAULT_MUSIC,sound:oe.DEFAULT_SOUND,statistics:be.statistics,lastMove:null,posibleMoves:null,capturedMoves:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:Oe.reset(),me("fen","");var n=de("side")||oe.DEFAULT_SIDE,s=de("view")||oe.DEFAULT_VIEW,a=de("mode")||oe.DEFAULT_MODE,c="random"===n?L():n;me("actualSide",c),"with-AI"===a&&"b"===c&&P(Oe.fen());var r={view:e.view,turn:Oe.turn(),mode:a,actualSide:c};return Object(ce.a)(Object(ce.a)({},e),{},{selectedSquare:null,promotion:null,turn:Oe.turn(),view:s,side:n,actualSide:c,mode:a,board:pe(r),isGameOver:!1,result:null,isSurrender:!1,lastMove:null,posibleMoves:null,capturedMoves:null});case b:var i=e.view,o=e.mode,u=e.actualSide,l=e.turn,d=he({view:i,mode:o,actualSide:u,turn:l}),m=Oe.moves({square:T(t.payload,d),verbose:!0}),y=[],M=[];return m.forEach((function(e){e.captured?M.push(D(e.to,d)):y.push(D(e.to,d))})),Object(ce.a)(Object(ce.a)({},e),{},{selectedSquare:t.payload,posibleMoves:y,capturedMoves:M});case j:var N=e.selectedSquare,E=e.view,A=e.turn,k=e.mode,I=e.actualSide;if(!N||N===t.payload)return e;var C=he({view:E,turn:A,mode:k,actualSide:I}),U=T(N,C),F=T(t.payload,C),q=Oe.moves({square:U,verbose:!0}).filter((function(e){return e.promotion}));if(q.length>0){ve.move.play().catch();var R=q[0].color;return Object(ce.a)(Object(ce.a)({},e),{},{promotion:{from:U,to:F,color:R}})}var G=Oe.move({from:U,to:F});if(!G)return Object(ce.a)(Object(ce.a)({},e),{},{selectedSquare:null});me("fen",Oe.fen());var V=Oe.game_over();e.sound&&ve.move.play().catch(),V||"with-AI"!==k||Oe.turn()===I||P(Oe.fen());var W={view:e.view,turn:Oe.turn(),mode:k,actualSide:I};return"auto-rotate"===E&&"two-players"===k&&(C=!C),Object(ce.a)(Object(ce.a)({},e),{},{selectedSquare:null,turn:Oe.turn(),board:pe(W),isGameOver:V,statistics:V?de("statistics"):e.statistics,result:V?xe({mode:k,actualSide:I}):null,lastMove:[D(U,C),D(F,C)],posibleMoves:null,capturedMoves:null});case h:var H=t.payload,K=H.from,B=H.to,J=H.promotion;Oe.move({from:K,to:B,promotion:J}),localStorage.setItem("react-chess-fen",Oe.fen());var z=Oe.game_over(),Q=e.mode,X=e.actualSide;z||"with-AI"!==Q||Oe.turn()===X||P(Oe.fen());var Y={view:e.view,turn:Oe.turn(),mode:Q,actualSide:X},Z=he(Y);return Object(ce.a)(Object(ce.a)({},e),{},{selectedSquare:null,promotion:null,turn:Oe.turn(),board:pe(Y),isGameOver:z,statistics:z?de("statistics"):e.statistics,result:z?xe({mode:Q,actualSide:X}):null,lastMove:[D(K,Z),D(B,Z)],posibleMoves:null,capturedMoves:null});case v:if(e.isSurrender)return Object(ce.a)({},e);Oe.move(t.payload),Oe.move(t.payload),me("fen",Oe.fen()),e.sound&&ve.move.play().catch();var $=Oe.game_over(),ee=e.mode,te=e.actualSide,ne=e.view,se={view:ne,mode:ee,actualSide:te,turn:Oe.turn()},ae=t.payload,re=ae.from,ie=ae.to,ue=he(se);return"auto-rotate"===ne&&"two-players"===ee&&(ue=!ue),Object(ce.a)(Object(ce.a)({},e),{},{promotion:null,turn:Oe.turn(),board:pe(se),isGameOver:$,statistics:$?de("statistics"):e.statistics,result:$?xe({mode:ee,actualSide:te}):null,lastMove:[D(re,ue),D(ie,ue)]});case f:var le="WINNER - ",be="";le+="b"===(be="with-AI"===e.mode?"w"===e.actualSide?"b":"w":"w"===e.turn?"b":"w")?"BLACK":"WHITE";var je="with-AI"===e.mode?e.actualSide:"-";return fe({mode:e.mode,side:je,winner:be}),Object(ce.a)(Object(ce.a)({},e),{},{isSurrender:!0,isGameOver:!0,result:le,statistics:de("statistics")});case p:var ge=e.mode,we=e.isGameOver,_e=e.promotion,ye=e.turn,Me=e.actualSide,Ne=e.view,Ee=Oe.history({verbose:!0});if(Ee.length<1)return Object(ce.a)(Object(ce.a)({},e),{},{lastMove:null,posibleMoves:null,capturedMoves:null});if(we||_e)return Object(ce.a)({},e);if("with-AI"===ge&&Ee.length<=2&&ye===Me)return Object(ce.a)({},e);var Ae=Oe.undo();Ae&&ve.move.play().catch(),me("fen",Oe.fen());var ke=Ee.length>=2?Ee[Ee.length-2]:null,Ie=he({mode:ge,view:Ne,turn:Oe.turn(),actualSide:Me}),Ce={view:Ne,turn:Oe.turn(),mode:ge,actualSide:Me};return Object(ce.a)(Object(ce.a)({},e),{},{board:pe(Ce),turn:Oe.turn(),lastMove:ke?[D(ke.from,Ie),D(ke.to,Ie)]:null});case x:return me("view",t.payload),Object(ce.a)(Object(ce.a)({},e),{},{view:t.payload});case S:return me("side",t.payload),Object(ce.a)(Object(ce.a)({},e),{},{side:t.payload});case g:return me("mode",t.payload),Object(ce.a)(Object(ce.a)({},e),{},{mode:t.payload});case _:return ve.move.volume=t.payload,Object(ce.a)(Object(ce.a)({},e),{},{sound:t.payload});case w:var Te=ve.music;return Te.paused&&t.payload?Te.play().catch():t.payload||Te.pause(),Te.volume=t.payload,Object(ce.a)(Object(ce.a)({},e),{},{music:t.payload});default:return e}},we=Object(ae.b)(ge),_e=function(e,t){if(e.data&&e.data.includes("bestmove")){var n=e.data.split(" ")[1],s=n.slice(0,2),a=n.slice(2,4);t((c={from:s,to:a,promotion:n[4]},{type:v,payload:c}))}var c};G.onmessage=function(e){return _e(e,we.dispatch)},r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(i.a,{basename:"/react-game",children:Object(d.jsx)(o.a,{store:we,children:Object(d.jsx)(ne,{})})})}),document.getElementById("root")),se()}},[[48,1,2]]]);
//# sourceMappingURL=main.12e9d31f.chunk.js.map